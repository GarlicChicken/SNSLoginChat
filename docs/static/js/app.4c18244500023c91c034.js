webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=a("VU/8")({name:"App"},o,!1,function(e){a("xwbU")},null,null).exports,i=a("/ocq"),c=a("mvHQ"),r=a.n(c),d={name:"KakaoLogin",data:function(){return{feedback:null,message:"다른 SNS 로그인도 추가할 예정"}},created:function(){Kakao.Auth.getAccessToken()&&this.$router.push("/SNSLoginChat/Chat")},mounted:function(){Kakao.Auth.createLoginButton({container:"#kakao-login-btn",success:function(e){location.href="/SNSLoginChat/"},fail:function(e){this.feedback="로그인이 정상적으로 되지 않았습니다.",alert(r()(e))}})}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"loginForm"}},[a("h1",[e._v("Welcome Chat Room")]),e._v(" "),e._m(0),e._v(" "),a("p",[e._v(e._s(e.feedback))]),e._v(" "),a("p",[e._v(e._s(e.message))])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"kakao-login"}},[t("a",{attrs:{id:"kakao-login-btn"}}),this._v(" "),t("a",{attrs:{href:"http://developers.kakao.com/logout"}})])}]};var l=a("VU/8")(d,u,!1,function(e){a("zstP")},"data-v-3ff16a71",null).exports,m=a("kxiW"),v=a.n(m),g=(a("881v"),v.a.initializeApp({apiKey:"AIzaSyD3-OYWXTCzM48fiB9doDUHPm_ExHEfGlY",authDomain:"kakao-login-chat.firebaseapp.com",databaseURL:"https://kakao-login-chat.firebaseio.com",projectId:"kakao-login-chat",storageBucket:"kakao-login-chat.appspot.com",messagingSenderId:"528088283871"}));g.firestore().settings({timestampsInSnapshots:!0});var p=g.firestore(),f={name:null,data:function(){return{isLoading:!1,messages:[],newMessage:null,kakaoId:null}},created:function(){var e=this;Kakao.API.request({url:"/v1/user/me",success:function(e){document.getElementById("kakaoName").value=e.properties.nickname,document.getElementById("kakaoId").value=e.id}}),p.collection("messages").onSnapshot(function(t){t.docChanges().forEach(function(t){if("added"==t.type){var a=t.doc;e.messages.push({id:a.id,name:a.data().name,content:a.data().content,kakaoId:a.data().kakaoId,timestamp:a.data().timestamp}),e.messages.sort(function(e,t){return e.timestamp-t.timestamp}),e.isLoading=!0}})})},updated:function(){this.kakaoId=document.getElementById("kakaoId").value,this.scrollToEnd()},methods:{addMessage:function(){var e=Number(new Date);this.newMessage&&(p.collection("messages").add({content:this.newMessage,name:document.getElementById("kakaoName").value,kakaoId:document.getElementById("kakaoId").value,timestamp:e}).catch(function(e){console.log(e)}),this.newMessage=null)},scrollToEnd:function(){var e=document.querySelector(".readMessage"),t=e.scrollHeight;e.scrollTop=t},kakaoLogout:function(){Kakao.Auth.logout(function(){location.href="/SNSLoginChat/"})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"loading"},[a("div",{staticClass:"bounce1"}),e._v(" "),a("div",{staticClass:"bounce2"}),e._v(" "),a("div",{staticClass:"bounce3"})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"chatRoom"},[a("h2",[e._v("SNS Login Chat Room")]),e._v(" "),a("div",{staticClass:"readMessage"},[a("ul",e._l(e.messages,function(t){return a("li",[t.kakaoId==e.kakaoId?a("div",[a("div",{staticClass:"myBox"},[e._v(e._s(t.content))])]):a("div",[a("div",{staticClass:"yourName"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"yourContent"},[e._v(e._s(t.content))])])])}))]),e._v(" "),a("div",{attrs:{id:"sendMessage"}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.addMessage(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{id:"inputBox",type:"text",autocomplete:"off"},domProps:{value:e.newMessage},on:{input:function(t){t.target.composing||(e.newMessage=t.target.value)}}})])]),e._v(" "),a("div",{attrs:{id:"logoutButton"},on:{click:e.kakaoLogout}},[e._v("LOGOUT")]),e._v(" "),a("input",{attrs:{id:"kakaoName",type:"hidden"}}),e._v(" "),a("input",{attrs:{id:"kakaoId",type:"hidden"}})])])},staticRenderFns:[]};var h=a("VU/8")(f,k,!1,function(e){a("sc1e")},null,null).exports;n.a.use(i.a);var _=new i.a({mode:"history",routes:[{path:"/SNSLoginChat/",name:"SnsLogin",component:l},{path:"/SNSLoginChat/Chat",name:"Chat",component:h,beforeEnter:function(e,t,a){if(Kakao.Auth.getAccessToken())return a();a("/")}}]});n.a.config.productionTip=!1,Kakao.init("da3bfaf021be62d706493fc7d38f906b"),new n.a({el:"#app",router:_,components:{App:s},template:"<App/>"})},sc1e:function(e,t){},xwbU:function(e,t){},zstP:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.4c18244500023c91c034.js.map