webpackJsonp([1],{"0VYN":function(e,a){},NHnr:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("7+uW"),s={render:function(){var e=this.$createElement,a=this._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]};var o=t("VU/8")({name:"App"},s,!1,function(e){t("xwbU")},null,null).exports,i=t("/ocq"),d=t("mvHQ"),c=t.n(d),r={name:"KakaoLogin",data:function(){return{feedback:null,message:"다른 SNS 로그인도 추가할 예정"}},created:function(){Kakao.Auth.getAccessToken()&&this.$router.push("/SNSLoginChat/Chat")},mounted:function(){Kakao.Auth.createLoginButton({container:"#kakao-login-btn",success:function(e){location.href="/SNSLoginChat/"},fail:function(e){this.feedback="로그인이 정상적으로 되지 않았습니다.",alert(c()(e))}})}},u={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"loginForm"}},[t("h1",[e._v("Welcome to Chat Room")]),e._v(" "),e._m(0),e._v(" "),t("p",[e._v(e._s(e.feedback))]),e._v(" "),t("p",[e._v(e._s(e.message))])])},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{attrs:{id:"kakao-login"}},[a("a",{attrs:{id:"kakao-login-btn"}}),this._v(" "),a("a",{attrs:{href:"http://developers.kakao.com/logout"}})])}]};var l=t("VU/8")(r,u,!1,function(e){t("m2Vk")},"data-v-45b017c0",null).exports,v=t("kxiW"),m=t.n(v),g=(t("881v"),m.a.initializeApp({apiKey:"AIzaSyD3-OYWXTCzM48fiB9doDUHPm_ExHEfGlY",authDomain:"kakao-login-chat.firebaseapp.com",databaseURL:"https://kakao-login-chat.firebaseio.com",projectId:"kakao-login-chat",storageBucket:"kakao-login-chat.appspot.com",messagingSenderId:"528088283871"}));g.firestore().settings({timestampsInSnapshots:!0});var k=g.firestore(),h={name:null,data:function(){return{isLoading:!1,messages:[],newMessage:null,kakaoId:null,viewMessage:20,totalMessage:null,update:null,toDay:String((new Date).getFullYear())+"년 "+String((new Date).getMonth())+"월 "+String((new Date).getDate())+"일"}},created:function(){var e=this;Kakao.API.request({url:"/v1/user/me",success:function(e){document.getElementById("kakaoName").value=e.properties.nickname,document.getElementById("kakaoId").value=e.id}});var a=null;k.collection("messages").orderBy("timestamp","asc").onSnapshot(function(t){t.docChanges().forEach(function(t){if("added"==t.type){var n=t.doc;null!==a&&a!==n.data().date?e.messages.push({name:n.data().name,content:n.data().content,kakaoId:n.data().kakaoId,timestamp:n.data().timestamp,date:n.data().date,dateChange:"change"}):e.messages.push({name:n.data().name,content:n.data().content,kakaoId:n.data().kakaoId,timestamp:n.data().timestamp,date:n.data().date}),a=n.data().date,e.totalMessage=e.totalMessage+1}}),e.isLoading=!0})},updated:function(){null===this.update&&(this.scrollMove(),this.update="updated"),this.kakaoId!==document.getElementById("kakaoId").value&&(this.kakaoId=document.getElementById("kakaoId").value)},methods:{addMessage:function(){var e=Number(new Date);this.newMessage&&(k.collection("messages").add({content:this.newMessage,name:document.getElementById("kakaoName").value,kakaoId:document.getElementById("kakaoId").value,timestamp:e,date:this.toDay}).catch(function(e){console.log(e)}),this.newMessage=null,this.scrollMove())},scrollMove:function(){var e=document.querySelector(".readMessage"),a=e.scrollHeight;e.scrollTop=a},kakaoLogout:function(){Kakao.Auth.logout(function(){location.href="/SNSLoginChat/"})},viewMore:function(){this.totalMessage>=this.viewMessage&&(this.viewMessage=this.viewMessage+20)}}},p={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"loading"},[t("div",{staticClass:"bounce1"}),e._v(" "),t("div",{staticClass:"bounce2"}),e._v(" "),t("div",{staticClass:"bounce3"})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"chatRoom"},[t("h2",[e._v("SNS Login Chat Room")]),e._v(" "),t("div",{staticClass:"readMessage"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.totalMessage>=e.viewMessage,expression:"totalMessage >= viewMessage"}],attrs:{id:"viewMore"},on:{click:e.viewMore}},[e._v("이전 대화 보기")]),e._v(" "),t("ul",e._l(e.messages,function(a,n){return t("li",{key:a.id},[e.viewMessage>=e.totalMessage-n?t("div",["change"===a.dateChange?t("div",{staticClass:"dateLine"},[e._v(e._s(a.date))]):e._e(),e._v(" "),a.kakaoId===e.kakaoId?t("div",[t("div",{staticClass:"myBox"},[e._v(e._s(a.content))])]):t("div",[t("div",{staticClass:"yourName"},[e._v(e._s(a.name))]),e._v(" "),t("div",{staticClass:"yourContent"},[e._v(e._s(a.content))])])]):e._e()])}))]),e._v(" "),t("div",{attrs:{id:"sendMessage"}},[t("form",{on:{submit:function(a){return a.preventDefault(),e.addMessage(a)}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{id:"inputBox",type:"text",autocomplete:"off"},domProps:{value:e.newMessage},on:{keydown:e.scrollMove,input:function(a){a.target.composing||(e.newMessage=a.target.value)}}})])]),e._v(" "),t("div",{attrs:{id:"logoutButton"},on:{click:e.kakaoLogout}},[e._v("LOGOUT")]),e._v(" "),t("input",{attrs:{id:"kakaoName",type:"hidden"}}),e._v(" "),t("input",{attrs:{id:"kakaoId",type:"hidden"}})])])},staticRenderFns:[]};var f=t("VU/8")(h,p,!1,function(e){t("0VYN")},"data-v-f81812e6",null).exports;n.a.use(i.a);var _=new i.a({mode:"history",routes:[{path:"/SNSLoginChat/",name:"SnsLogin",component:l},{path:"/SNSLoginChat/Chat",name:"Chat",component:f,props:null,beforeEnter:function(e,a,t){if(Kakao.Auth.getAccessToken())return t();t("/")}}]});n.a.config.productionTip=!1,Kakao.init("da3bfaf021be62d706493fc7d38f906b"),new n.a({el:"#app",router:_,components:{App:o},template:"<App/>"})},m2Vk:function(e,a){},xwbU:function(e,a){}},["NHnr"]);
//# sourceMappingURL=app.0fe45c808ec25afef139.js.map